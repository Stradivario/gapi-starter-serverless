{"dependencies":[{"name":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/tsconfig.json","includedInParent":true,"mtime":1530575932039},{"name":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/package.json","includedInParent":true,"mtime":1530577925491},{"name":"./auth.module","loc":{"line":13,"column":30},"parent":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/src/app/auth/main.ts","resolved":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/src/app/auth/auth.module.ts"},{"name":"../../framework-imports","loc":{"line":14,"column":36},"parent":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/src/app/auth/main.ts","resolved":"/home/rampage/Desktop/work/repos/private/gapi-starter-serverless/src/framework-imports.ts"}],"generated":{"js":"\"use strict\";var e=this,t=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,\"__esModule\",{value:!0});const r=require(\"@gapi/core\"),o=require(\"url\"),n=require(\"./auth.module\"),i=require(\"../../framework-imports\"),s=r.BootstrapFramework(n.AuthMicroserviceModule,[i.FrameworkImports],{init:!0}).toPromise();exports.handler=((n,i,a)=>t(e,void 0,void 0,function*(){yield s;let e=o.format({pathname:n.path,query:n.queryStringParameters});e=e.replace(\"auth/\",\"\");const t={method:n.httpMethod,url:e,payload:n.body,headers:n.headers,validate:!1};let i={statusCode:502,result:null};try{i=yield r.Container.get(r.HAPI_SERVER).inject(t)}catch(e){console.error(\"ERROR\",JSON.stringify(e))}const a=Object.assign({\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Methods\":\"DELETE,GET,HEAD,OPTIONS,PATCH,POST,PUT\"});return{statusCode:i.statusCode,body:i.result,headers:a}}));","map":{"mappings":[{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":0}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":13}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":17}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":19}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":24}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":26}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":32}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":37}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":48}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":57}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":59}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":61}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":63}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":66}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":73}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":77}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":81}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":83}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":93}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":102}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":104}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":107}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":116}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":118}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":121}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":125}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":127}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":129}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":134}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":138}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":144}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":147}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":149}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":153}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":162}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":164}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":167}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":171}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":173}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":175}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":181}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":185}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":191}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":194}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":196}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":200}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":209}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":211}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":214}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":216}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":221}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":223}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":225}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":232}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":236}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":238}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":247}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":250}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":252}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":254}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":263}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":268}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":270}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":273}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":276}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":278}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":280}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":286}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":288}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":296}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":307}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":314}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":329}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":337}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":351}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":358}},{"source":"main.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":362}},{"source":"main.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":368}},{"source":"main.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":370}},{"source":"main.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":378}},{"source":"main.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":392}},{"source":"main.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":394}},{"source":"main.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":402}},{"source":"main.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":409}},{"source":"main.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":411}},{"source":"main.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":419}},{"source":"main.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":436}},{"source":"main.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":438}},{"source":"main.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":446}},{"source":"main.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":1,"column":473}},{"source":"main.ts","name":null,"original":{"line":7,"column":12},"generated":{"line":1,"column":475}},{"source":"main.ts","name":null,"original":{"line":7,"column":12},"generated":{"line":1,"column":477}},{"source":"main.ts","name":null,"original":{"line":7,"column":31},"generated":{"line":1,"column":496}},{"source":"main.ts","name":null,"original":{"line":7,"column":31},"generated":{"line":1,"column":498}},{"source":"main.ts","name":null,"original":{"line":7,"column":56},"generated":{"line":1,"column":522}},{"source":"main.ts","name":null,"original":{"line":7,"column":56},"generated":{"line":1,"column":524}},{"source":"main.ts","name":null,"original":{"line":7,"column":77},"generated":{"line":1,"column":543}},{"source":"main.ts","name":null,"original":{"line":7,"column":83},"generated":{"line":1,"column":549}},{"source":"main.ts","name":null,"original":{"line":7,"column":91},"generated":{"line":1,"column":553}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":565}},{"source":"main.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":573}},{"source":"main.ts","name":null,"original":{"line":9,"column":23},"generated":{"line":1,"column":581}},{"source":"main.ts","name":null,"original":{"line":9,"column":30},"generated":{"line":1,"column":583}},{"source":"main.ts","name":null,"original":{"line":9,"column":37},"generated":{"line":1,"column":585}},{"source":"main.ts","name":null,"original":{"line":9,"column":46},"generated":{"line":1,"column":587}},{"source":"main.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":591}},{"source":"main.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":593}},{"source":"main.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":600}},{"source":"main.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":607}},{"source":"main.ts","name":null,"original":{"line":9,"column":58},"generated":{"line":1,"column":609}},{"source":"main.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":627}},{"source":"main.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":629}},{"source":"main.ts","name":null,"original":{"line":11,"column":8},"generated":{"line":1,"column":633}},{"source":"main.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":635}},{"source":"main.ts","name":null,"original":{"line":11,"column":14},"generated":{"line":1,"column":637}},{"source":"main.ts","name":null,"original":{"line":12,"column":18},"generated":{"line":1,"column":645}},{"source":"main.ts","name":null,"original":{"line":12,"column":18},"generated":{"line":1,"column":654}},{"source":"main.ts","name":null,"original":{"line":12,"column":24},"generated":{"line":1,"column":656}},{"source":"main.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":661}},{"source":"main.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":667}},{"source":"main.ts","name":null,"original":{"line":13,"column":21},"generated":{"line":1,"column":669}},{"source":"main.ts","name":null,"original":{"line":15,"column":10},"generated":{"line":1,"column":693}},{"source":"main.ts","name":null,"original":{"line":15,"column":10},"generated":{"line":1,"column":695}},{"source":"main.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":1,"column":697}},{"source":"main.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":705}},{"source":"main.ts","name":null,"original":{"line":15,"column":31},"generated":{"line":1,"column":713}},{"source":"main.ts","name":null,"original":{"line":16,"column":10},"generated":{"line":1,"column":717}},{"source":"main.ts","name":null,"original":{"line":16,"column":10},"generated":{"line":1,"column":723}},{"source":"main.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":726}},{"source":"main.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":733}},{"source":"main.ts","name":null,"original":{"line":17,"column":22},"generated":{"line":1,"column":735}},{"source":"main.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":746}},{"source":"main.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":750}},{"source":"main.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":752}},{"source":"main.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":760}},{"source":"main.ts","name":null,"original":{"line":19,"column":23},"generated":{"line":1,"column":762}},{"source":"main.ts","name":null,"original":{"line":20,"column":17},"generated":{"line":1,"column":767}},{"source":"main.ts","name":null,"original":{"line":20,"column":17},"generated":{"line":1,"column":775}},{"source":"main.ts","name":null,"original":{"line":20,"column":23},"generated":{"line":1,"column":777}},{"source":"main.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":785}},{"source":"main.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":795}},{"source":"main.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":798}},{"source":"main.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":802}},{"source":"main.ts","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":805}},{"source":"main.ts","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":816}},{"source":"main.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":820}},{"source":"main.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":827}},{"source":"main.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":833}},{"source":"main.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":837}},{"source":"main.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":845}},{"source":"main.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":847}},{"source":"main.ts","name":null,"original":{"line":28,"column":30},"generated":{"line":1,"column":857}},{"source":"main.ts","name":null,"original":{"line":28,"column":42},"generated":{"line":1,"column":861}},{"source":"main.ts","name":null,"original":{"line":28,"column":42},"generated":{"line":1,"column":863}},{"source":"main.ts","name":null,"original":{"line":28,"column":55},"generated":{"line":1,"column":876}},{"source":"main.ts","name":null,"original":{"line":28,"column":62},"generated":{"line":1,"column":883}},{"source":"main.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":886}},{"source":"main.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":892}},{"source":"main.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":1,"column":895}},{"source":"main.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":1,"column":903}},{"source":"main.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":909}},{"source":"main.ts","name":null,"original":{"line":30,"column":31},"generated":{"line":1,"column":917}},{"source":"main.ts","name":null,"original":{"line":30,"column":36},"generated":{"line":1,"column":922}},{"source":"main.ts","name":null,"original":{"line":30,"column":46},"generated":{"line":1,"column":932}},{"source":"main.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":1,"column":936}},{"source":"main.ts","name":null,"original":{"line":32,"column":10},"generated":{"line":1,"column":942}},{"source":"main.ts","name":null,"original":{"line":32,"column":20},"generated":{"line":1,"column":944}},{"source":"main.ts","name":null,"original":{"line":32,"column":27},"generated":{"line":1,"column":951}},{"source":"main.ts","name":null,"original":{"line":33,"column":39},"generated":{"line":1,"column":959}},{"source":"main.ts","name":null,"original":{"line":33,"column":39},"generated":{"line":1,"column":989}},{"source":"main.ts","name":null,"original":{"line":34,"column":40},"generated":{"line":1,"column":993}},{"source":"main.ts","name":null,"original":{"line":34,"column":40},"generated":{"line":1,"column":1024}},{"source":"main.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":1,"column":1067}},{"source":"main.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":1074}},{"source":"main.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":1085}},{"source":"main.ts","name":null,"original":{"line":37,"column":24},"generated":{"line":1,"column":1087}},{"source":"main.ts","name":null,"original":{"line":38,"column":14},"generated":{"line":1,"column":1098}},{"source":"main.ts","name":null,"original":{"line":38,"column":14},"generated":{"line":1,"column":1103}},{"source":"main.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":1105}},{"source":"main.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":1112}},{"source":"main.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":1120}}],"sources":{"main.ts":"import { BootstrapFramework, Container, HAPI_SERVER } from '@gapi/core';\nimport { format } from 'url';\nimport { AuthMicroserviceModule } from './auth.module';\nimport { Server } from 'hapi';\nimport { FrameworkImports } from '../../framework-imports';\n\nconst App = BootstrapFramework(AuthMicroserviceModule, [FrameworkImports], { init: true }).toPromise();\n\nexport const handler = async (event, context, callback) => {\n    await App;\n    let url = format({\n        pathname: event.path,\n        query: event.queryStringParameters\n    });\n    url = url.replace('auth/', '');\n    const options = {\n        method: event.httpMethod,\n        url,\n        payload: event.body,\n        headers: event.headers,\n        validate: false\n    };\n    let res = {\n        statusCode: 502,\n        result: null\n    };\n    try {\n        res = await Container.get<Server>(HAPI_SERVER).inject(options);\n    } catch (e) {\n        console.error('ERROR', JSON.stringify(e));\n    }\n    const headers = Object.assign({\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'DELETE,GET,HEAD,OPTIONS,PATCH,POST,PUT'\n    });\n    return {\n        statusCode: res.statusCode,\n        body: res.result,\n        headers\n    };\n};"},"lineCount":null}},"hash":"3c0ba7f2c43f451c30d31de7ac383b9c","cacheData":{"env":{}},"id":1}